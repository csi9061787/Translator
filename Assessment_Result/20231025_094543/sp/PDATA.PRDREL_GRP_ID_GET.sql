REPLACE PROCEDURE PDATA.PRDREL_GRP_ID_GET
(
	OUT O_GRP_ID INTEGER   
)
SP:BEGIN
	DECLARE V_NUM INTEGER;
	DECLARE V_VAL VARCHAR(30);
	SELECT PARA_VAL1 INTO V_VAL
	FROM PDATA.SYS_PARA
	WHERE FUN_CLASS ='PRDREL'
	AND PARA_TYPE = 'GRP_ID'
	AND PARA_ID =1;
	SET V_NUM = 1;
	IF V_VAL IS NOT NULL THEN
		SET V_NUM = CAST(V_VAL AS INT);
	ELSE
		INSERT INTO PDATA.SYS_PARA (
			FUN_CLASS, PARA_TYPE, PARA_ID, 
			PARA_NAME, PARA_VAL1, PARA_VAL2, 
			PARA_DESC, SORT_ID)
		VALUES (
			'PRDREL','GRP_ID', 1, 
			'自訂群組序號', 1, NULL, 
			'給號用',1);
	END IF;
	UPDATE PDATA.SYS_PARA
	SET PARA_VAL1 = V_NUM + 1
	WHERE FUN_CLASS ='PRDREL'
	AND PARA_TYPE = 'GRP_ID'
	AND PARA_ID =1;
	SET O_GRP_ID = V_NUM;
END SP;